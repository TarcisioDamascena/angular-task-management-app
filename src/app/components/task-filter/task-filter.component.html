<div class="filter-sidebar">
    <div class="filter-header">
      <h3>Filter & Sort</h3>
      <button mat-button color="primary" (click)="clearFilters()">
        <mat-icon>clear_all</mat-icon>
        Clear
      </button>
    </div>
  
    <mat-accordion>
      <!-- Search Filter -->
      <mat-expansion-panel expanded>
        <mat-expansion-panel-header>
          <mat-panel-title>Search</mat-panel-title>
        </mat-expansion-panel-header>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Search tasks</mat-label>
          <input matInput [(ngModel)]="filters.search" (ngModelChange)="applyFilters()" placeholder="Search by title...">
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
      </mat-expansion-panel>
  
      <!-- Status Filter -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Status</mat-panel-title>
        </mat-expansion-panel-header>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Select status</mat-label>
          <mat-select [(ngModel)]="filters.status" multiple (ngModelChange)="applyFilters()">
            <mat-option *ngFor="let option of statusOptions" [value]="option.value">
              {{option.label}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-expansion-panel>
  
      <!-- Priority Filter -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Priority</mat-panel-title>
        </mat-expansion-panel-header>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Select priority</mat-label>
          <mat-select [(ngModel)]="filters.priority" multiple (ngModelChange)="applyFilters()">
            <mat-option *ngFor="let option of priorityOptions" [value]="option.value">
              {{option.label}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-expansion-panel>
  
      <!-- Due Date Filter -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Due Date Range</mat-panel-title>
        </mat-expansion-panel-header>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Start date</mat-label>
          <input matInput [matDatepicker]="startPicker" [(ngModel)]="filters.dueDateRange.start" (ngModelChange)="applyFilters()">
          <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
          <mat-datepicker #startPicker></mat-datepicker>
        </mat-form-field>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>End date</mat-label>
          <input matInput [matDatepicker]="endPicker" [(ngModel)]="filters.dueDateRange.end" (ngModelChange)="applyFilters()">
          <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
          <mat-datepicker #endPicker></mat-datepicker>
        </mat-form-field>
      </mat-expansion-panel>
  
      <!-- Sort Options -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Sort</mat-panel-title>
        </mat-expansion-panel-header>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Sort by</mat-label>
          <mat-select [(ngModel)]="filters.sortBy" (ngModelChange)="applyFilters()">
            <mat-option *ngFor="let option of sortOptions" [value]="option.value">
              {{option.label}}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Direction</mat-label>
          <mat-select [(ngModel)]="filters.sortDirection" (ngModelChange)="applyFilters()">
            <mat-option value="asc">Ascending</mat-option>
            <mat-option value="desc">Descending</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-expansion-panel>
    </mat-accordion>
  </div>